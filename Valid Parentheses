/*
Authour: Nahor Yirgaalem
Date: June 21, 2022
Time complexity: O(n)
Space complexity: O(n)

Uses a stack to determine whether the given strings is a valid input. String is valid when;
    1. Open brackets must be closed by the same type of brackets.
    2. Open brackets must be closed in the correct order.
*/

class Solution {
    public boolean isValid(String s) {
        
        //Creates a stack
        Stack<Character> stack = new Stack<>();
        
        //Iterates through string
        for(int i = 0; i < s.length(); i++){
            
            //A variable used to track current character (cleaner than using s.charAt(i) multiple times)
            char curr = s.charAt(i);
            
            //Checks if the current character is a opening bracket. If so, it adds it to the stack
            if(curr == '(' || curr == '{' || curr == '[')
                stack.push(s.charAt(i));
            
            //If the current character is not a opening bracket, checks if there is anything in the stack. The ensures no closing bracket appears before a closing bracket (or there exists                   more open then close)
            else if(stack.size() > 0){
                //If the current character is a closing bracket, it pops from the stack (since stacks are FILO, it takes the most recent entry) and checks if that bracket is the opening                         bracket for the current one.
                if(curr == ')'){
                    if(stack.pop() != '(')
                        return false;
                }

                else if(curr == '}'){
                   if(stack.pop() != '{')
                        return false;
                }    
                else if(curr == ']'){
                    if(stack.pop() != '[')
                        return false;
                }
            }
        
            else
                return false;
        }
        //Checks if there is still characters in the stack, if so that means there were some brackets that didn't close thus it is invalid and returns false.
        if(stack.size() > 0)
            return false;
        
        return true;
    }
}
